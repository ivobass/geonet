<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>netSocial- talk</title>
    
<!-- Mobile viewport optimized: h5bp.com/viewport -->
	  <meta name="viewport" content="width=device-width">

<!-- Main stylesheet imports bootstrap css and adds custom -->
    <link href="css/style.css" rel="stylesheet">
    
    <style>
    	/* To keep short panes open decently tall */
    	.tab-pane {min-height: 00px;}
    </style>

<!-- Modernizr for browser feature-checking 
			+ HTML5shiv (included in modernizr) see modernizr.com -->
  	<script src="js/modernizr-2.5.3.min.js"></script>

<!-- Fav and touch icons -->
		<!-- alternatively, remove these lines and place icons
				directly in the site parent folder 
				mathiasbynens.be/notes/touch-icons -->
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="apple-touch-icon" href="img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="img/apple-touch-icon-114x114.png">
    
    <!-- jQuery via Google + local fallback, see h5bp.com -->
	  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  	<script>window.jQuery || document.write('<script src="js/jquery-1.7.1.min.js"><\/script>')</script>

    
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=geometry,places&sensor=false&key=AIzaSyBH5uMwXgVnXn2l6MFBtI5GjmrGJhBGS78"></script>
    
    <script>
	
	var pGG;
	
	function triggerCount() {
/* 		clearTimeout(); */

		window.setInterval(function(){
/* 			alert('a'); */
			console.log('a');
  			/// call your function here
  			$.ajax({
  				type: 'POST',
  				url: 'http://192.168.0.150/api/updates',
  				data: {q: '{"lat":'+pGG.coords.latitude+',"lon":'+pGG.coords.longitude+'}'},
  				success: function(data) {
  					console.log(data);
  					var obj  = $.parseJSON(data);
  					
  					var html = "<div class='well comment' style='font-size:15px'>
        			<ul class='thumbnails'>
  						<li class='span3' style='width:48px;height:48px'>
    						<a href='#' class='thumbnail'>
      							<img src='http://placehold.it/48x48' />
    						</a>
  						</li>
						<span style='position:relative;top:15px;'>&nbsp; Roberto: <strong>que tal muchachas</strong></span>		
					</ul>
        		</div>";;;
        		console.writeln(html);
        		$('#separador').prepend(html);
  					
  				}
			});
		}, 5000);
	}
	
	</script>
    
  </head>

<body style="margin:0;padding:0;">
<div id="banner" style="background-color:#596090; border: 1px; border-color:#424242; border-style:solid">
<img src="img/banner.png" width="360" height="118"></div><br>
<script>

function addComment()
{
	var el = $('.comment').html();
	console.log(el);
	var er = $('#separador').prepend('<div class="well comment" style="font-size:15px;">'+el+'</div>');
}

</script>

<div class="tabbable">
	<ul class="nav nav-tabs">
		<li class="active"><a href="#tab1" data-toggle="tab">Talk</a></li>
    	<li><a href="#tab2" data-toggle="tab">Interés comercial</a></li>
    	<li><a href="#tab3" data-toggle="tab">Configuración</a></li>
    	<li><a href="#tab4" data-toggle="tab">Buscador</a></li>
  	</ul>
  	<div class="tab-content">
    	<div class="tab-pane active" id="tab1">
    	<textarea class="input-xlarge" id="textarea" rows="3"></textarea>
    	<a class="btn btn-primary" href="#" id="post">Postear</a>
    		<div id="separador">
    			
        		<div class="well comment" style="font-size:15px">
        			<ul class="thumbnails">
  						<li class="span3" style="width:48px;height:48px">
    						<a href="#" class="thumbnail">
      							<img src="http://placehold.it/48x48" />
    						</a>
  						</li>
                        <!--<script type="text/javascript">
							var currentTime = new Date();
							var hh = currentTime.getHours();
							var ss = currentTime.getMinutes();
							var mm = currentTime.getSeconds();
							document.write("<span class='pull-right'>"+hh + ":" + ss + ":" + mm+"</span>");
						</script>-->
						<span style="position:relative;top:15px;">&nbsp; Roberto: <strong>como estas?</strong></span>		
					</ul>
        		</div>
        		
        		<div class="well comment" style="font-size:15px">
        			<ul class="thumbnails">
  						<li class="span3" style="width:48px;height:48px">
    						<a href="#" class="thumbnail">
      							<img src="http://placehold.it/48x48" />
    						</a>
  						</li>
                        <script type="text/javascript">
							var currentTime = new Date();
							var hh = currentTime.getHours();
							var ss = currentTime.getMinutes();
							var mm = currentTime.getSeconds();
							document.write("<span class='pull-right'>"+hh + ":" + ss + ":" + mm+"</span>");
						</script>
						<span style="position:relative;top:15px;">&nbsp; maria: <strong>hola</strong></span>		
					</ul>
        		</div>
        		
        	</div>
        </div>
        
    	<div class="tab-pane" id="tab2">
        nada
   		</div>
        
        <div class="tab-pane" id="tab3">      
      
   		</div>
   		
   		 <div class="tab-pane" id="tab4"> 
   		 
   		 	<script>
   		 	
   		 	var map;
   		 	var service;
   		 	var infowindow;
   		 	
   		 	</script>
   		 
   		 
   		 	<form class="well form-search" id="main-search">
			  <input type="text" class="input-medium search-query">
			  <button type="submit" class="btn">Search</button>
			</form>
			
			
   		 
   		 
   		      
      		<!-- nfksanfklas -->

		
			<script src="js/h5utils.js"></script>
			<section id="wrapper">
			<div id="carbonads-container"><div class="carbonad"><div id="azcarbon"></div><script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/14060/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script></div></div>
			    <header>
			      <h1>geolocation</h1>
			    </header>
			

			    <article>
			      <p>Finding your location: <span id="status">checking...</span></p>
			    </article>
			<script>
			
			
			function success(position) {
			  var s = document.querySelector('#status');
			  
			  if (s.className == 'success') {
			    // not sure why we're hitting this twice in FF, I think it's to do with a cached result coming back    
			    return;
			  }
			  
			  s.innerHTML = "found you!";
			  s.className = 'success';
			  
			  var mapcanvas = document.createElement('div');
			  mapcanvas.id = 'mapcanvas';
			  mapcanvas.style.height = '400px';
			  mapcanvas.style.width = '560px';
			    
			  document.querySelector('article').appendChild(mapcanvas);
			  
			  var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
			  pGG = position;
			  console.log(position.coords.latitude, position.coords.longitude);
			  
			  $('#post').click(function () {
					console.log('agregar');
					$.ajax({
	  					type: 'POST',
	  					url: 'http://192.168.0.150/api/post',
	  					data: {lat:pGG.coords.latitude, lon:pGG.coords.longitude, text:$('#textarea').val()}
					});
					addComment();
				});
				console.log('agregar');
			  
			  	/*
$.ajax({
			  		type: 'POST',
			  		url: 'http://192.168.0.150/api/updates',
			  		data: {q: '{"lat":'+position.coords.latitude+',"lon":'+position.coords.longitude+''},
				});
*/
				
			  var myOptions = {
			    zoom: 15,
			    center: latlng,
			    mapTypeControl: false,
			    navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
			    mapTypeId: google.maps.MapTypeId.ROADMAP
			  };
			  
			  map = new google.maps.Map(document.getElementById("mapcanvas"), myOptions);
			  
			  var marker = new google.maps.Marker({
			      position: latlng, 
			      map: map, 
			      title:"You are here! (at least within a "+position.coords.accuracy+" meter radius)"
			  });
			}
			
			function error(msg) {
			  var s = document.querySelector('#status');
			  s.innerHTML = typeof msg == 'string' ? msg : "failed";
			  s.className = 'fail';
			  
			  // console.log(arguments);
			}
			
			if (navigator.geolocation) {
			  navigator.geolocation.getCurrentPosition(success, error);
			} else {
			  error('not supported');
			}
			
 			triggerCount();    /* Triggerrnkfnaknsfklsnfkldnsklfdbnklsbfdk  */


			
			
			$('#main-search').submit(function(event) {
				console.log('ab');
				event.preventDefault();
				
				var request = {
				    location: pGG.coords.latitude+","+pGG.coords.longitude, 
			        radius: 1000,
			        types:['food'],
			        sensor: false,
			        key: 'AIzaSyBH5uMwXgVnXn2l6MFBtI5GjmrGJhBGS78'
  				};
				
				console.log();
				
				service = new google.maps.places.PlacesService(map);
				
				console.log('ff');
				service.search(request, callback);
				console.log('ffg');
				
				function callback(results, status) {
				  console.log('aaa');
				  
				  if (status == google.maps.places.PlacesServiceStatus.OK) {
				    for (var i = 0; i < results.length; i++) {
				      var place = results[i];
				      createMarker(results[i]);
				    }
				  }
				}
			});



			</script>
			</section>
			<!-- <script src="js/prettify.packed.js"></script> -->
			<!-- <script>
			var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
			</script>
			<script>
			try {
			var pageTracker = _gat._getTracker("UA-1656750-18");
			pageTracker._trackPageview();
			} catch(err) {}</script> -->
			
			
			
			
			<!-- nfksanfklas -->
   		</div>
  	</div>
</div>
<a href="#" onclick="addComment();">Aca</a>
</body>
<footer>
<br>
        <!--
        <p>geoSocial plataform <a href="http://okwu.edu">Oklahoma Wesleyan University</a> and <a href="http://alittlecode.com/">aLittleCode.com</a> for <a href="http://webdesign.tutsplus.com/">webdesign.tutsplus.com</a>. Free for your use! (No warranties, no guarantees.)</p>
      </footer>

    </div> <!-- /container
    -->
    
    
    

<!-- ==============================================
		 JavaScript below! 															-->


<!-- Bootstrap JS: compiled and minified -->
    <script src="js/bootstrap.min.js"></script>

<!-- Example plugin: Prettify -->
    <script src="js/prettify/prettify.js"></script>
    
<!-- Initialize Scripts -->
		<script>
			// Activate Google Prettify in this page
			addEventListener('load', prettyPrint, false);
		
			$(document).ready(function(){

				// Add prettyprint class to pre elements
					$('pre').addClass('prettyprint');

				// Initialize tabs and pills
					$('.note-tabs').tab();
								
			}); // end document.ready
		</script>


  </body>
</html>
